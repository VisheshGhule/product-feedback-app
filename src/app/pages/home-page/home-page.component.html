<dialog
  #asideModal
  class="h-screen fixed top-[4.594rem] left-auto backdrop:bg-[#000] backdrop:top-[4.594rem] backdrop:bg-opacity-60 m-0 ease-in-out duration-300"
  [ngClass]="isOpen ? 'translate-x-0 has-backdrop' : 'translate-x-full'"
  (click)="toggleAsideModal()"
  (keypress)="toggleAsideModal()"
>
  <aside
    aria-label="feedback-navigation"
    class="w-full h-full bg-lightest-gray flex flex-col items-center px-6 py-6 gap-5"
  >
    <div
      class="p-6 bg-white rounded-lg w-[13.938rem] lg:w-full flex flex-wrap gap-2 lg:gap-3.5"
    >
      <app-tag-button>All</app-tag-button>
      <app-tag-button>UI</app-tag-button>
      <app-tag-button>UX</app-tag-button>
      <app-tag-button>Enhancement</app-tag-button>
      <app-tag-button>Bug</app-tag-button>
      <app-tag-button>Feature</app-tag-button>
    </div>
    <div class="text-dusk-blue p-6 bg-white w-[13.938rem] rounded-lg">
      <div class="flex justify-between">
        <h3 class="text-s5">Roadmap</h3>
        <a
          href="#"
          class="text-royal-blue underline hover:text-opacity-60 transition-all"
          >View</a
        >
      </div>
      <ul class="mt-5 flex flex-col gap-1 list-disc list-inside">
        <li class="marker:text-peach flex justify-between">
          <span>Planned</span>
          <span class="text-s4 font-bold">2</span>
        </li>
        <li class="marker:text-rich-purple flex justify-between">
          <span>In-Progress</span>
          <span class="text-s4 font-bold">3</span>
        </li>
        <li class="marker:text-bright-teal flex justify-between">
          <span>Live</span>
          <span class="text-s4 font-bold">1</span>
        </li>
      </ul>
    </div>
  </aside>
</dialog>
<div
  class="w-full min-h-screen lg:w-11/12 xl:w-10/12 flex flex-col lg:flex-row lg:gap-5 md:px-10 md:py-16 md:pb-0 lg:mx-auto relative"
>
  <aside
    aria-label="feedback-navigation"
    class="hidden md:bg-lightest-gray z-20 md:flex lg:flex-col gap-2 lg:gap-6 mb-10 h-[11.125rem] lg:h-fit lg:w-[15.9375rem]"
  >
    <div
      class="p-6 text-white rounded-lg w-4/12 lg:h-[8.5625rem] lg:w-full bg-tablet-header bg-cover flex flex-col justify-end"
    >
      <h1 class="text-s6 font-bold">Frontend Mentor</h1>
      <h2 class="text-s3 opacity-75">Feedback Board</h2>
    </div>
    <div
      class="p-6 bg-white rounded-lg w-4/12 lg:w-full flex flex-wrap gap-2 lg:gap-3.5"
    >
      <app-tag-button>All</app-tag-button>
      <app-tag-button>UI</app-tag-button>
      <app-tag-button>UX</app-tag-button>
      <app-tag-button>Enhancement</app-tag-button>
      <app-tag-button>Bug</app-tag-button>
      <app-tag-button>Feature</app-tag-button>
    </div>
    <div class="text-dusk-blue p-6 bg-white w-4/12 lg:w-full rounded-lg">
      <div class="flex justify-between">
        <h3 class="text-s5 font-bold">Roadmap</h3>
        <a
          href="#"
          class="text-royal-blue underline hover:text-opacity-60 transition-all"
          >View</a
        >
      </div>
      <ul class="mt-5 flex flex-col gap-1 list-disc list-inside">
        <li class="marker:text-peach flex justify-between">
          <span>Planned</span>
          <span class="text-s4 font-bold">{{
            getFeedbacksNumberByStatus("planned")
          }}</span>
        </li>
        <li class="marker:text-rich-purple flex justify-between">
          <span>In-Progress</span>
          <span class="text-s4 font-bold">{{
            getFeedbacksNumberByStatus("in-progress")
          }}</span>
        </li>
        <li class="marker:text-bright-teal flex justify-between">
          <span>Live</span>
          <span class="text-s4 font-bold">{{
            getFeedbacksNumberByStatus("live")
          }}</span>
        </li>
      </ul>
    </div>
  </aside>
  <div class="lg:w-10/12 relative flex-grow">
    <header>
      <div
        class="text-white flex justify-between items-center py-4 px-6 bg-mobile-header bg-cover md:hidden"
      >
        <div>
          <h1 class="text-s3 font-bold">Frontend Mentor</h1>
          <h2 class="text-s1 font-medium opacity-75">Feedback Board</h2>
        </div>
        <button
          class="relative group"
          type="button"
          (click)="toggleAsideModal()"
          (keypress)="toggleAsideModal()"
        >
          <div
            class="relative flex overflow-hidden items-center justify-center transform transition-all duration-200"
          >
            <div
              class="flex flex-col justify-between w-[20px] h-[18px] transform transition-all duration-300 origin-center overflow-hidden"
            >
              <div
                class="bg-white h-[3px] w-5 transform transition-all duration-300 origin-left"
                [ngClass]="{ 'translate-x-10': isOpen }"
              ></div>
              <div
                class="bg-white h-[3px] w-5 rounded transform transition-all duration-300 delay-75"
                [ngClass]="{ 'translate-x-10': isOpen }"
              ></div>
              <div
                class="bg-white h-[3px] w-5 transform transition-all duration-300 origin-left delay-150"
                [ngClass]="{ 'translate-x-10': isOpen }"
              ></div>
              <div
                class="absolute items-center justify-between transform transition-all duration-500 top-2.5 -translate-x-10 flex w-0"
                [ngClass]="{ '-translate-x-10 w-12': !isOpen }"
              >
                <div
                  class="absolute bg-white h-[3px] w-5 transform transition-all duration-500 delay-300"
                  [ngClass]="!isOpen ? 'rotate-0' : 'rotate-45'"
                ></div>
                <div
                  class="absolute bg-white h-[3px] w-5 transform transition-all duration-500 delay-300"
                  [ngClass]="!isOpen ? '-rotate-0' : '-rotate-45'"
                ></div>
              </div>
            </div>
          </div>
        </button>
      </div>
      <div
        class="bg-deep-indigo px-6 py-2 md:p-3.5 md:px-3 md:rounded-custom-lg flex justify-between items-center"
      >
        <div class="flex gap-8 items-center">
          <div class="md:flex items-center gap-4 px-2.5 hidden">
            <img
              src="/assets/images/shared/icon-suggestions.svg"
              alt="bulb icon"
            />
            <span class="text-s5 font-bold text-white"
              >{{
                productFeedbackData.productRequests.length
              }}
              Suggestions</span
            >
          </div>
          <app-sort-menu
            [menuOptions]="[{ name: 'Most Upvotes', href: 'most-upvotes' }]"
          ></app-sort-menu>
        </div>
        <app-button
          customClass="bg-rich-purple"
          (click)="goTonewFeedBackPage()"
          (keyPress)="goTonewFeedBackPage()"
          >+ Add Feedback</app-button
        >
      </div>
    </header>
    <main
      class="text-s1 h-[calc(100vh_-_128px)] md:h-[calc(100vh_-_375px)] lg:h-[calc(100vh_-_156px)] px-5 pt-8 pb-12 md:pb-14 lg:pb-30 md:px-0 md:pt-0 md:mt-5 overflow-y-auto"
    >
      @if (productFeedbackData.productRequests.length === 0) {
      <div
        class="h-full bg-white p-6 rounded-custom-lg flex flex-col items-center justify-center"
      >
        <div
          class="w-[6.375rem] h-[6.75rem] md:w-[8.1025rem] md:h-[8.54638rem]"
        >
          <img
            src="./assets/images/shared/illustration-empty.svg"
            alt="empty illustration"
            fill
          />
        </div>
        <div class="text-center mt-10 md:mt-5 max-w-[25.625rem]">
          <h3 class="text-s5 font-bold md:text-s7 text-deep-indigo mb-4">
            There is no feedback yet.
          </h3>
          <p class="text-s4 text-dusk-blue font-normal">
            Got a suggestion? Found a bug that needs to be squashed? We love
            hearing about new ideas to improve our app.
          </p>
        </div>
        <app-button
          customClass="bg-rich-purple"
          class="mt-6 md:mt-12"
          (click)="goTonewFeedBackPage()"
          (keyPress)="goTonewFeedBackPage()"
          >+ Add Feedback</app-button
        >
      </div>
      } @else {
      <ul>
        @for (request of productFeedbackData.productRequests; track request.id)
        {
        <li
          class="bg-white rounded-lg p-6 md:p-8 mb-3 md:flex md:gap-10 lg:hover:cursor-pointer group/request"
        >
          <div class="hidden md:block">
            <button
              type="button"
              class="w-[40px] text-deep-indigo font-bold inline-flex flex-col items-center gap-2 bg-lightest-gray rounded-lg px-2.5 pb-2 pt-2.5 lg:hover:bg-royal-blue lg:hover:text-white transition-colors group/vote-btn"
            >
              <span>
                <svg
                  width="9"
                  height="7"
                  viewBox="0 0 9 7"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                  class="stroke-royal-blue lg:group-hover/vote-btn:stroke-white transition-colors"
                >
                  <path d="M0 6L4 2L8 6" stroke-width="2" />
                </svg>
              </span>
              <span>
                {{ request.upvotes }}
              </span>
            </button>
          </div>
          <div class="md:w-11/12">
            <h2
              class="font-bold mb-2 md:mb-1 md:text-s5 lg:group-hover/request:text-royal-blue transition-colors"
            >
              {{ request.title }}
            </h2>
            <p class="text-medium-gray font-normal mb-3 md:mb-5 md:text-s4">
              {{ request.description }}
            </p>
            <span
              class="text-royal-blue font-bold bg-lightest-gray px-3 py-1 rounded-lg capitalize"
              >{{ request.category }}</span
            >
            <div class="flex items-center justify-between mt-4 md:hidden">
              <button
                type="button"
                class="inline-flex font-bold text-deep-indigo items-center gap-2 bg-lightest-gray rounded-lg px-3 py-1 active:bg-royal-blue active:text-white transition-colors group/vote-btn"
              >
                <span>
                  <svg
                    width="9"
                    height="7"
                    viewBox="0 0 9 7"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="stroke-royal-blue group-active/vote-btn:stroke-white"
                  >
                    <path d="M0 6L4 2L8 6" stroke-width="2" />
                  </svg>
                </span>
                <span>
                  {{ request.upvotes }}
                </span>
              </button>
              <span class="inline-flex items-center gap-1.5">
                <span
                  ><svg
                    width="18"
                    height="16"
                    viewBox="0 0 18 16"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M2.62074 16H1.34534L2.24718 15.0895C2.73344 14.5986 3.0371 13.9601 3.11873 13.2674C1.03637 11.8878 0 9.88917 0 7.79388C0 3.92832 3.51913 0 9.0305 0C14.8692 0 18 3.61479 18 7.45522C18 11.321 14.8361 14.9333 9.0305 14.9333C8.0135 14.9333 6.95226 14.7963 6.00478 14.5448C5.10787 15.4735 3.89262 16 2.62074 16Z"
                      fill="#CDD2EE"
                    />
                  </svg>
                </span>
                <span class="font-bold text-deep-indigo">
                  {{ request.comments.length }}
                </span>
              </span>
            </div>
          </div>
          <div class="hidden md:flex">
            <span class="inline-flex items-center gap-1.5">
              <span
                ><svg
                  width="18"
                  height="16"
                  viewBox="0 0 18 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.62074 16H1.34534L2.24718 15.0895C2.73344 14.5986 3.0371 13.9601 3.11873 13.2674C1.03637 11.8878 0 9.88917 0 7.79388C0 3.92832 3.51913 0 9.0305 0C14.8692 0 18 3.61479 18 7.45522C18 11.321 14.8361 14.9333 9.0305 14.9333C8.0135 14.9333 6.95226 14.7963 6.00478 14.5448C5.10787 15.4735 3.89262 16 2.62074 16Z"
                    fill="#CDD2EE"
                  />
                </svg>
              </span>
              <span class="font-bold">
                {{ request.comments.length }}
              </span>
            </span>
          </div>
        </li>
        }
      </ul>
      }
    </main>
  </div>
</div>
